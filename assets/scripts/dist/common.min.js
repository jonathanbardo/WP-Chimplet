String.prototype.escapeSelector=function(a){return a=new RegExp("(["+(a||"[]:")+"])"),this.replace(a,"\\$1")},function(a){"use strict";var b={toggle:function(b){var c,d,e,f,g,h;c=a(b.currentTarget),g="data-condition-"+c.data("condition-key"),h=!c.is(":checkbox")&&!c.is(":radio")||c.prop("checked")?c.val():"",d=a("["+g+"]"),e=d.filter("["+g+'="'+h+'"]').removeClass("hidden"),f=d.not("["+g+'="'+h+'"]').addClass("hidden")}};a(".chimplet-wrap").on("change.chimplet.condition","[data-condition-key]",b.toggle)}(jQuery),function(a){"use strict";var b={toggle:function(b){var c,d,e,f,g;c=a(b.currentTarget),g=c.parents("[data-checkbox-scoped]"),e=a(':checkbox[name="'+c.attr("name").escapeSelector()+'"]',g.length?g:null).not(":disabled"),"all"===c.val()?(f=c,e=e.not(f),e.prop("checked",f.prop("checked"))):(f=e.filter('[value="all"]'),e=e.not(f),d=e.filter(":checked"),f.length&&(e=e.not(f),f.prop("checked",d.length>0).prop("indeterminate",d.length>0&&d.length<e.length)))}};a(".chimplet-wrap").on("change.chimplet.toggle-checkboxes",':checkbox[name$="[]"]',b.toggle)}(jQuery),function(a){"use strict";var b={working:!1,init:function(b){this.working||(this.$trigger=a(b.target),this.$fieldset=this.$trigger.closest("fieldset"),this.$notices=this.$trigger.siblings(".chimplet-notice"),this.$checkbox=this.$fieldset.find('[type="checkbox"]'),this.$tableRow=this.$fieldset.closest("tr"),this.$checkbox.prop("checked")?this.sync(0):this.$trigger.attr("disabled","disabled"))},showLoader:function(){this.$notices.remove(),this.$tableRow.removeClass("form-invalid"),this.$checkbox.attr("disabled","disabled").hide(),this.$trigger.attr("disabled","disabled").addClass("chimplet-spinner")},hideLoader:function(){this.$trigger.removeAttr("disabled").removeClass("chimplet-spinner"),this.$checkbox.removeAttr("disabled").show()},sync:function(b){this.working=!0;var c={action:this.$trigger.data("xhr-action"),nonce:this.$trigger.data("xhr-nonce"),offset:b};this.jqxhr=a.ajax({type:"GET",url:ajaxurl,dataType:"json",data:c,beforeSend:a.proxy(this.beforeRequest,this)}).done(a.proxy(this.requestDone,this)).fail(a.proxy(this.requestFailed,this)).always(a.proxy(this.requestComplete,this))},beforeRequest:function(a,b){this.showLoader()},requestDone:function(b,c,d){var e;return"object"===a.type(b)&&b.success?void(b.success&&(b.data&&"next"in b.data&&b.data.next>0?this.sync(b.data.next):this.working=!1)):(e=b.data&&b.data.message?b.data.message.text||("string"===a.type(b.data.message)?b.data.message:"Unsuccessful Response"):"Unsuccessful Response",this.requestFailed(d,c,e,b))},requestFailed:function(a,b,c,d){this.working=!1,this.$tableRow.addClass("form-invalid")},requestComplete:function(){var a=this.parseRequestArgs.apply(this,arguments);this.resolveNotices(a.response),this.working||this.hideLoader()},hasNotices:function(b){return"object"===a.type(b)&&b.data.message},resolveNotices:function(b){var c,d,e;this.hasNotices(b)&&(c=b.data.message,d=c.type||"info",e=c.text||("string"===a.type(c)?c:!1),e&&(this.$notices=a('<p class="chimplet-notice panel-'+d+'">'+e+"</p>").appendTo(this.$fieldset)))},parseRequestArgs:function(){var b={failed:!0,jqXHR:{},textStatus:"",errorThrown:"",response:null};return arguments[2]&&"string"===a.type(arguments[2])?(b.jqXHR=arguments[0]||null,b.textStatus=arguments[1]||null,b.errorThrown=arguments[2]||null,b.response=arguments[3]||null,b.failed=b.response&&"success"in b.response?b.response.success:!0):(b.response=arguments[0]||null,b.textStatus=arguments[1]||null,b.jqXHR=arguments[2]||null,b.errorThrown=null,b.failed=b.response&&"success"in b.response?!b.response.success:!1),b}};a(".chimplet-wrap").on("click.chimplet.sync",'[data-automation="sync"]',a.proxy(b.init,b))}(jQuery);