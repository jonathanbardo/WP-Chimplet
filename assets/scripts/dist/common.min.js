String.prototype.escapeSelector=function(a){return a=new RegExp("(["+(a||"[]:")+"])"),this.replace(a,"\\$1")},function(a){"use strict";var b={toggle:function(b){var c,d,e,f,g,h;c=a(b.currentTarget),g="data-condition-"+c.data("condition-key"),h=c.val(),d=a("["+g+"]"),e=d.filter("["+g+'="'+h+'"]').removeClass("hidden"),f=d.not("["+g+'="'+h+'"]').addClass("hidden")}};a(".chimplet-wrap").on("change.chimplet.condition","[data-condition-key]",b.toggle)}(jQuery),function(a){"use strict";var b={toggle:function(b){var c,d,e,f,g;c=a(b.currentTarget),g=c.parents("[data-checkbox-scoped]"),e=a(':checkbox[name="'+c.attr("name").escapeSelector()+'"]',g.length?g:null).not(":disabled"),"all"===c.val()?(f=c,e=e.not(f),e.prop("checked",f.prop("checked"))):(f=e.filter('[value="all"]'),e=e.not(f),d=e.filter(":checked"),f.length&&(e=e.not(f),f.prop("checked",d.length>0).prop("indeterminate",d.length>0&&d.length<e.length)))}};a(".chimplet-wrap").on("change.chimplet.toggle-checkboxes",':checkbox[name$="[]"]',b.toggle)}(jQuery),function(a){"use strict";var b={working:!1,toggle:function(b){this.working||(this.$checkbox=a(b.target),this.$fieldset=this.$checkbox.closest("fieldset"),this.$notices=this.$fieldset.children(".chimplet-notice"),this.$tableRow=this.$fieldset.closest("tr"),this.$checkbox.prop("checked")&&(this.prepareLoader(),this.sync(0)))},prepareLoader:function(){this.$spinner||(this.$spinner=a('<div class="spinner alignleft"></div>'),this.$spinner.prependTo(this.$checkbox.parent()))},showLoader:function(){this.$tableRow.removeClass("form-invalid"),this.$tableRow.addClass("chimplet-loading"),this.$checkbox.attr("disabled","disabled").hide(),this.$spinner.show()},hideLoader:function(){this.$spinner.hide(),this.$checkbox.removeAttr("disabled").show(),this.$tableRow.removeClass("chimplet-loading")},sync:function(b){this.working=!0;var c={action:chimpletCommon.action,subscribersNonce:chimpletCommon.subscriberSyncNonce,offset:b};this.jqxhr=a.ajax({type:"GET",url:ajaxurl,dataType:"json",data:c,beforeSend:a.proxy(this.beforeRequest,this)}).done(a.proxy(this.requestDone,this)).fail(a.proxy(this.requestFailed,this)).always(a.proxy(this.requestComplete,this))},beforeRequest:function(a,b){this.showLoader()},requestDone:function(b,c,d){var e;return"object"===a.type(b)&&b.success?void(b.success&&(b.data&&"next"in b.data&&b.data.next>0?this.sync(b.data.next):this.working=!1)):(e=b.data&&b.data.message?b.data.message.text||("string"===a.type(b.data.message)?b.data.message:"Unsuccessful Response"):"Unsuccessful Response",this.requestFailed(d,c,e,b))},requestFailed:function(a,b,c,d){this.working=!1,this.$tableRow.addClass("form-invalid"),this.$checkbox.prop("checked",!0)},requestComplete:function(){var a;a=this.parseRequestArgs.apply(this,arguments),this.resolveNotices(a.response),this.working||this.hideLoader()},hasNotices:function(b){return"object"===a.type(b)&&b.data.message},resolveNotices:function(b){var c,d,e;this.$notices.remove(),this.hasNotices(b)&&(c=b.data.message,d=c.type||"info",e=c.text||("string"===a.type(c)?c:!1),e&&(this.$notices=a('<p class="chimplet-notice panel-'+d+'" for="'+this.$checkbox.attr("id")+'">'+e+"</p>").appendTo(this.$fieldset)))},parseRequestArgs:function(){var b={failed:!0,jqXHR:{},textStatus:"",errorThrown:"",response:null};return arguments[2]&&"string"===a.type(arguments[2])?(b.jqXHR=arguments[0]||null,b.textStatus=arguments[1]||null,b.errorThrown=arguments[2]||null,b.response=arguments[3]||null,b.failed=b.response&&"success"in b.response?b.response.success:!0):(b.response=arguments[0]||null,b.textStatus=arguments[1]||null,b.jqXHR=arguments[2]||null,b.errorThrown=null,b.failed=b.response&&"success"in b.response?!b.response.success:!1),b}};a(".chimplet-wrap").on("change.chimplet.toggle-subscribers-automation",':checkbox[name$="[subscribers][automate]"]',a.proxy(b.toggle,b))}(jQuery);